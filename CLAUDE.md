# Telegram Autoposter ‚Äî –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –ø–∞–º—è—Ç—å

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–ê–≤—Ç–æ–ø–æ—Å—Ç–µ—Ä –¥–ª—è Telegram-–∫–∞–Ω–∞–ª–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –æ–º–æ–ª–æ–∂–µ–Ω–∏—é –ª–∏—Ü–∞.
–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è: –∂–µ–Ω—â–∏–Ω—ã 30-55 –ª–µ—Ç.

**–î–≤—É—Ö—Ñ–∞–∑–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:**
1. **Phase 1 (05:00 –ú–°–ö / 02:00 UTC):** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ ‚Üí `pending_post.json`
2. **Phase 2 (15:00 –ú–°–ö / 12:00 UTC):** –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram

–ú–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ ‚Äî –æ–∫–Ω–æ 10 —á–∞—Å–æ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Streamlit UI.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `main.py` | CLI: `generate` / `publish` / `full` |
| `app.py` | Streamlit Web UI (~1480 —Å—Ç—Ä–æ–∫) |
| `config.py` | –ó–∞–≥—Ä—É–∑–∫–∞ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, API-–∫–ª—é—á–µ–π, —Ñ–∞–±—Ä–∏–∫–∞ `get_gemini_client()` |
| `generate_text.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (Claude/Gemini/OpenAI) |
| `generate_image.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Gemini/OpenAI), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ inline face + reference photo |
| `face_swap.py` | –ó–∞–º–µ–Ω–∞ –ª–∏—Ü–∞ (Replicate/Gemini/OpenAI) ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥ |
| `post_telegram.py` | –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram |
| `document_parser.py` | –ü–∞—Ä—Å–∏–Ω–≥ PDF/DOCX/TXT –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |

**–î–∞–Ω–Ω—ã–µ (JSON):**
- `ideas.json` ‚Äî –ø—É–ª –∏–¥–µ–π –¥–ª—è –ø–æ—Å—Ç–æ–≤ (`used: true/false`)
- `pending_post.json` ‚Äî —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫ (—Ç–µ–∫—Å—Ç + base64 –∫–∞—Ä—Ç–∏–Ω–∫–∞)
- `history.json` ‚Äî –∞—Ä—Ö–∏–≤ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
- `prompts.json` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã (system + image)
- `expert_face.json` ‚Äî base64 —Ñ–æ—Ç–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ –¥–ª—è face swap
- `prompt_context.json` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `provider.cfg` ‚Äî –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ + —Ñ–ª–∞–≥ –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- `.github/workflows/autopublish.yml` ‚Äî GitHub Actions

---

## –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### –¢–µ–∫—Å—Ç
| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| `openai` | gpt-4o | –†–∞–±–æ—Ç–∞–µ—Ç |
| `claude` | claude-sonnet-4-5-20250929 | –†–∞–±–æ—Ç–∞–µ—Ç |
| `gemini` | gemini-2.5-flash | –†–∞–±–æ—Ç–∞–µ—Ç |

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å (–±–µ–∑ face) | –ú–æ–¥–µ–ª—å (—Å inline face) | –°—Ç–∞—Ç—É—Å |
|-----------|-------------------|------------------------|--------|
| `openai` | dall-e-3 (1024x1024) | gpt-image-1 via `images.edit()` | –†–∞–±–æ—Ç–∞–µ—Ç |
| `gemini` | gemini-2.5-flash-image | gemini-2.5-flash-image (multimodal) | –†–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–µ–Ω –±–∏–ª–ª–∏–Ω–≥) |

### Face Swap (–æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥)
| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| `replicate` | codeplugtech/face-swap:278a81e7... | –†–∞–±–æ—Ç–∞–µ—Ç (–ø–ª–∞—Ç–Ω–æ ~$0.01) |
| `gemini` | gemini-2.5-flash-image | –†–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–µ–Ω –±–∏–ª–ª–∏–Ω–≥) |
| `openai` | gpt-image-1 via `images.edit()` | –†–∞–±–æ—Ç–∞–µ—Ç |

---

## Inline Face Generation (–∫–ª—é—á–µ–≤–∞—è —Ñ–∏—á–∞, —Ñ–µ–≤—Ä–∞–ª—å 2026)

–í–º–µ—Å—Ç–æ –¥–≤—É—Ö API-–≤—ã–∑–æ–≤–æ–≤ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è + face swap) ‚Äî **–æ–¥–∏–Ω –≤—ã–∑–æ–≤** —Å –ª–∏—Ü–æ–º —ç–∫—Å–ø–µ—Ä—Ç–∞ –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
```
–ï—Å–ª–∏ FACE_SWAP_PROVIDER == gemini AND IMAGE_PROVIDER == gemini:
  ‚Üí Inline: generate_image(expert_face_b64=...) ‚Äî 1 –≤—ã–∑–æ–≤
–ï—Å–ª–∏ FACE_SWAP_PROVIDER in (replicate, openai):
  ‚Üí –†–∞–∑–¥–µ–ª—å–Ω–æ: generate_image() + apply_face_swap() ‚Äî 2 –≤—ã–∑–æ–≤–∞
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º

**Gemini inline:**
```python
# generate_image.py ‚Üí _generate_gemini()
contents = [
    prompt + "\n\n–°–æ–∑–¥–∞–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –≥–¥–µ –≥–ª–∞–≤–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–º–µ–µ—Ç –ª–∏—Ü–æ "
             "—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–≥–æ —Ñ–æ—Ç–æ...",
    types.Part.from_bytes(data=face_bytes, mime_type="image/jpeg"),
]
response = client.models.generate_content(
    model="gemini-2.5-flash-image", contents=contents,
    config=types.GenerateContentConfig(response_modalities=["IMAGE"]),
)
```

**OpenAI** ‚Äî inline face –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. OpenAI face swap —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ **–æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥** —á–µ—Ä–µ–∑ `apply_face_swap()` (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Replicate).

### –ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è inline face
–õ–æ–≥–∏–∫–∞ inline face —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ **4 –º–µ—Å—Ç–∞—Ö** `app.py` + **2 –º–µ—Å—Ç–∞** `main.py`:
```python
inline_face = (
    face_swap_prov == "gemini"
    and img_prov == "gemini"
    and expert_b64_for_swap
)
```

---

## –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ —Ñ–æ—Ç–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ (—Ñ–µ–≤—Ä–∞–ª—å 2026)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å, –∫–æ—Ç–æ—Ä–æ–µ AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞–∫ –æ—Ä–∏–µ–Ω—Ç–∏—Ä –¥–ª—è —Å—Ç–∏–ª—è, –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫.

### –ì–¥–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ UI
–ó–∞–≥—Ä—É–∑—á–∏–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–≥–æ —Ñ–æ—Ç–æ –µ—Å—Ç—å –≤ **3 –≤–∫–ª–∞–¥–∫–∞—Ö** Streamlit:
1. **–ü—Ä–æ–º–ø—Ç—ã** ‚Äî —Å–µ–∫—Ü–∏—è "üìé –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ —Ñ–æ—Ç–æ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–∫–∏" (—Å –ø—Ä–µ–≤—å—é, —Å—Ç–∞—Ç—É—Å–æ–º, –∫–Ω–æ–ø–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è)
2. **–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç** ‚Äî –ø–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ + –≤ —Å–µ–∫—Ü–∏–∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. **–ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è** ‚Äî –ø–µ—Ä–µ–¥ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫" + –≤ —Å–µ–∫—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞

### –ö–∞–∫ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ API
–ü–∞—Ä–∞–º–µ—Ç—Ä `reference_image_b64` (base64 JPEG) –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `generate_image()`:

**Gemini:** –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ `types.Part.from_bytes` –≤ multimodal –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø—Ä–æ–º–ø—Ç–æ–º.
**OpenAI:** –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å `images.generate()` (dall-e-3) –Ω–∞ `images.edit()` (gpt-image-1) —Å —Ñ–æ—Ç–æ –∫–∞–∫ –≤—Ö–æ–¥–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å face swap
–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ —Ñ–æ—Ç–æ –∏ face swap ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ–∏—á–∏. –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
- `expert_face_b64` ‚Äî –ª–∏—Ü–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ (–¥–ª—è face swap / inline face)
- `reference_image_b64` ‚Äî —Å—Ç–∏–ª—å/–∫–æ–º–ø–æ–∑–∏—Ü–∏—è/–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞
- –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–±–æ–∏—Ö ‚Äî OpenAI –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ `images.edit()`

### Session state
–•—Ä–∞–Ω–∏—Ç—Å—è –≤ `st.session_state["reference_image_b64"]`. –í—Å–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∏ –≤–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö –ø–∏—à—É—Ç –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª—é—á ‚Äî —Ñ–æ—Ç–æ, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –≤ –æ–¥–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ, –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –¥—Ä—É–≥–∏—Ö.

---

## Dual Auth: AI Studio + Vertex AI

`config.py` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–±—Ä–∏–∫—É `get_gemini_client()` —Å —Ç—Ä–µ–º—è —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
1. `api_key_override` (—è–≤–Ω—ã–π –∫–ª—é—á) ‚Üí AI Studio
2. `GOOGLE_PROJECT_ID` + service account ‚Üí Vertex AI
3. `GEMINI_API_KEY` ‚Üí AI Studio

```python
def get_gemini_client(api_key_override=None):
    from google import genai
    if api_key_override:
        return genai.Client(api_key=api_key_override)
    if GOOGLE_PROJECT_ID:
        _setup_vertex_credentials()
        return genai.Client(vertexai=True, project=GOOGLE_PROJECT_ID, location=GOOGLE_LOCATION)
    if GEMINI_API_KEY:
        return genai.Client(api_key=GEMINI_API_KEY)
    raise ValueError("No Gemini credentials found...")
```

–í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_gemini_client()`: `generate_text.py`, `generate_image.py`, `face_swap.py`.

---

## –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Replicate face swap ‚Äî –º–æ–¥–µ–ª—å —É–¥–∞–ª–µ–Ω–∞ (—Ñ–µ–≤—Ä–∞–ª—å 2026)
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å `xiankgx/face-swap` —É–¥–∞–ª–µ–Ω–∞ —Å Replicate (404).
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `codeplugtech/face-swap` —Å —è–≤–Ω—ã–º version hash.
**–í–∞–∂–Ω–æ:** –ë–µ–∑ version hash Replicate SDK –∏—Å–ø–æ–ª—å–∑—É–µ—Ç endpoint `/v1/models/.../predictions` (404). –° hash –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/v1/predictions` (—Ä–∞–±–æ—Ç–∞–µ—Ç).
```python
# –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî —Å version hash:
"codeplugtech/face-swap:278a81e7ebb22db98bcba54de985d22cc1abeead2754eb1f2af717247be69b34"

# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –±–µ–∑ hash (404):
"codeplugtech/face-swap"
```

### 2. REPLICATE_API_KEY –Ω–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub Secrets
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª—é—á –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª ‚Üí –æ—à–∏–±–∫–∞ "REPLICATE_API_KEY –Ω–µ –∑–∞–¥–∞–Ω".
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –≤ Settings ‚Üí Secrets ‚Üí Actions.

### 3. –ù–µ—Ä–∞–±–æ—á–∏–µ –º–æ–¥–µ–ª–∏ Replicate (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
- `xiankgx/face-swap` ‚Äî —É–¥–∞–ª–µ–Ω–∞
- `arabyai-replicate/roop_face_swap` ‚Äî —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ, –Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `cdingram/face-swap` (–±–µ–∑ hash) ‚Äî 404
- `easel/advanced-face-swap` ‚Äî 404
- `fofr/face-swap-with-ideogram` ‚Äî 404

### 4. –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω provider.cfg –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–ø–∏–µ–π –∏ GitHub
**–ü—Ä–æ–±–ª–µ–º–∞:** Streamlit UI –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ GitHub API, –∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è —Å—Ç–∞—Ä–æ–π.
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞—Ç—å `git pull` –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π provider.cfg –Ω–∞ GitHub.

### 5. Gemini: —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–æ–¥–µ–ª–∏ (—Ñ–µ–≤—Ä–∞–ª—å 2026)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å `gemini-2.5-flash-preview-04-17` —É–¥–∞–ª–µ–Ω–∞ ‚Üí –æ—à–∏–±–∫–∞ `'ascii' codec can't encode`.
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏:
- –¢–µ–∫—Å—Ç: `gemini-2.5-flash-preview-04-17` ‚Üí `gemini-2.5-flash` (GA)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/face swap: ‚Üí `gemini-2.5-flash-image` (GA)

### 6. Gemini: API –∫–ª—é—á –∏–∑ Cloud Console vs AI Studio
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª—é—á –∏–∑ Google Cloud Console (Vertex AI) –¥–∞–µ—Ç –æ—à–∏–±–∫—É "API keys are not supported by this API".
**–†–µ—à–µ–Ω–∏–µ:** –î–ª—è AI Studio –Ω—É–∂–µ–Ω –∫–ª—é—á **—Ç–æ–ª—å–∫–æ —Å aistudio.google.com**. –ö–ª—é—á–∏ –∏–∑ Cloud Console ‚Äî —ç—Ç–æ Vertex AI, —Ç—Ä–µ–±—É—é—Ç OAuth2.

### 7. Gemini: –º–æ–¥–µ–ª–∏ —Å OAuth2 (–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å API –∫–ª—é—á–∞–º–∏)
**–ü—Ä–æ–±–ª–µ–º–∞:** `gemini-3.1-flash-image-preview` (Nano Banana 2) –∏ `gemini-2.5-flash-preview-05-20` —Ç—Ä–µ–±—É—é—Ç OAuth2.
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GA-–º–æ–¥–µ–ª–∏: `gemini-2.5-flash` (—Ç–µ–∫—Å—Ç), `gemini-2.5-flash-image` (–∫–∞—Ä—Ç–∏–Ω–∫–∏).

### 8. Gemini: –∫–≤–æ—Ç–∞ free tier = 0 –¥–ª—è image generation
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á AI Studio –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç 0 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è `gemini-2.5-flash-preview-image` ‚Üí –æ—à–∏–±–∫–∞ 429 RESOURCE_EXHAUSTED.
**–†–µ—à–µ–Ω–∏–µ:** Inline face generation (1 –≤—ã–∑–æ–≤ –≤–º–µ—Å—Ç–æ 2) —Å–Ω–∏–∂–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥ –∫–≤–æ—Ç—ã. –ù–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ **–≤–∫–ª—é—á–∏—Ç—å –±–∏–ª–ª–∏–Ω–≥** –≤ AI Studio.

---

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (provider.cfg –Ω–∞ GitHub)
```
TEXT_PROVIDER=gemini
IMAGE_PROVIDER=openai
FACE_SWAP_PROVIDER=openai
AUTOPUBLISH_ENABLED=true
```

–ü—Ä–∏ —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- –¢–µ–∫—Å—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **Gemini** (`gemini-2.5-flash`)
- –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **OpenAI** (`dall-e-3` –∏–ª–∏ `gpt-image-1` –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å)
- Face swap —á–µ—Ä–µ–∑ **OpenAI** –∫–∞–∫ **–æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥** (`gpt-image-1` via `images.edit()`)

---

## –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ Streamlit UI

| IMAGE_PROVIDER | FACE_SWAP_PROVIDER | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç |
|----------------|-------------------|----------------|
| `gemini` | `gemini` | 1 –≤—ã–∑–æ–≤: Gemini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –ª–∏—Ü–æ–º (inline) |
| `openai` | `openai` | 2 –≤—ã–∑–æ–≤–∞: OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç + OpenAI face swap (–æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥) |
| `gemini` | `openai` | 2 –≤—ã–∑–æ–≤–∞: Gemini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç + OpenAI face swap |
| `openai` | `gemini` | 2 –≤—ã–∑–æ–≤–∞: OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç + Gemini face swap |
| `gemini` | `replicate` | 2 –≤—ã–∑–æ–≤–∞: Gemini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç + Replicate –º–µ–Ω—è–µ—Ç –ª–∏—Ü–æ |
| `openai` | `replicate` | 2 –≤—ã–∑–æ–≤–∞: OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç + Replicate –º–µ–Ω—è–µ—Ç –ª–∏—Ü–æ |
| –ª—é–±–æ–π | (–ø—É—Å—Ç–æ) | –ö–∞—Ä—Ç–∏–Ω–∫–∞ –±–µ–∑ –ª–∏—Ü–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Inline face (1 –≤—ã–∑–æ–≤) —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `gemini`+`gemini`. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç 2 –≤—ã–∑–æ–≤–∞.
–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ **—Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–≥–æ —Ñ–æ—Ç–æ** ‚Äî –æ–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

---

## –í–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Telegram:** Caption <= 1024 —Å–∏–º–≤–æ–ª–æ–≤ ‚Üí –µ—Å–ª–∏ –¥–ª–∏–Ω–Ω–µ–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ç–æ + –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **Base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** –•—Ä–∞–Ω—è—Ç—Å—è –≤ JSON, JPEG quality=85
- **Face swap fallback:** –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –±–µ–∑ –∑–∞–º–µ–Ω—ã –ª–∏—Ü–∞ (–Ω–µ –ø–∞–¥–∞–µ—Ç)
- **GitHub –∫–∞–∫ –ë–î:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **–ü—Ä–æ–º–ø—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º**, –∫–æ–¥ –∏ API-–≤—ã–∑–æ–≤—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- **expert_face.json** (~875KB) ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ git
- **SDK:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `google-genai` (–Ω–æ–≤—ã–π SDK), –ù–ï `google.generativeai` (—Å—Ç–∞—Ä—ã–π)
- **Streamlit Cloud:** –°–µ–∫—Ä–µ—Ç—ã –±—Ä–∏–¥–∂–∞—Ç—Å—è –≤ `os.environ` —á–µ—Ä–µ–∑ `_SECRET_KEYS` –≤ `app.py`

---

## –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
`alexandermalevich85-commits/telegram-autoposter`

## –°–µ–∫—Ä–µ—Ç—ã GitHub Actions
- `CLAUDE_API_KEY`
- `GEMINI_API_KEY`
- `OPENAI_API_KEY`
- `REPLICATE_API_KEY`
- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHANNEL_ID`
- `GOOGLE_PROJECT_ID` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Vertex AI)
- `GOOGLE_LOCATION` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Vertex AI, default: us-central1)
- `GOOGLE_SERVICE_ACCOUNT_JSON` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Vertex AI)
